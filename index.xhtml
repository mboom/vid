<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="nl" lang="nl">
    <head>
        <style>
            video {
                height: 360px;
                width: 640px;
            }
        </style>
        <title>Overview</title>
    </head>


    <body>
        <video autoplay="" controls="" data-dashjs-player=""
          src="https://dash.akamaized.net/envivio/EnvivioDash3/manifest.mpd"></video>



        <script
          src="https://code.jquery.com/jquery-3.2.1.min.js"
          integrity="sha256-k2WSCIexGzOj3Euiig+TlR8gA0EmPjuc79OEeY5L45g="
          crossorigin="anonymous"></script>
        <script src="https://cdn.dashjs.org/latest/dash.all.min.js"></script>
        <script src="providers.js"></script>

  

        <script>
            var cameras = {
                "list": [],
                "selectCamera": function (id) {
                    for (let camera of list) {
                        if (camera.id === id) {
                            return camera;
                        }
                    }
                    throw new Error("camera not found");
                },
                "getStream": function (id, stream, protocol) {
                    var source = id;
                    var cam = selectCamera(id);
                    if (stream === "live") {
                        source = cam.stream;
                    }
                    return providers.selectSource(cam.provider, "static", "image").location(source);
                }
            };
            $.getJSON("cameras.json", function (data) {
                cameras.list = data;
                testCCTV();
            });
        </script>

  
          
        <script>
            var cctv = {
                addLive: function (src) {
                    var video = document.createElement("video");
                    video.setAttribute("autoplay", "");
                    video.setAttribute("controls", "");
                    video.setAttribute("data-dashjs-player", "");
                    video.setAttribute("src", src);
                    document.querySelector("body").appendChild(video);
                },
                addStatic: function (src) {
                    var img = document.createElement("img");
                    img.setAttribute("src", src);
                    document.querySelector("body").appendChild(img);
                }
            };
        </script>
  
  
  
        <script>
            function testCCTV() {
                for (let i = 0; i < 5; ++i) {
                    cctv.addLive(cameras.getStream(cameras.list[i].id));
                }
            }
        </script>
    </body>
</html>
